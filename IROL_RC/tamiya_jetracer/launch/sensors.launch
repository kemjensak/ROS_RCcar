<launch> 
  <arg name="joy_config" default="ps3" />
  <arg name="joy_dev" default="/dev/input/js0" />
  <arg name="config_filepath" default="$(find teleop_twist_joy)/config/$(arg joy_config).config.yaml" />
  
  <include file="$(find rplidar_ros)/launch/rplidar.launch">
    <param name="serial_port" value="/dev/rplidar"/>
  </include>
  
  <node name="xsens_mti_node" pkg="xsens_mti_driver" type="xsens_mti_node" output="screen">
      <rosparam command="load" file="$(find tamiya_jetracer)/param/xsens_mti_node.yaml" />
  </node>

  <node pkg="tamiya_jetracer" name="vesc_node" type="vesc_controller_auto.py" output="screen"> </node>
  <node pkg="tamiya_jetracer" name="odom_publisher" type="odom_publisher" output="screen"> </node>
  <include file="$(find teleop_twist_joy)/launch/teleop.launch"/>


  <node name="vesc_odom_publisher" pkg="tamiya_jetracer" type="odom_publisher" output="screen">
    
  </node>

  <node pkg="tf" type="static_transform_publisher" name="base_to_laser_broadcaster" args="0.25 0 0.155 3.14 0 0 base_link laser 10"/>
  <node pkg="tf" type="static_transform_publisher" name="base_to_imu_broadcaster" args="0.17 0 0.125 0 0 0 base_link imu_link 10"/>

  <node pkg="robot_localization" type="ukf_localization_node" name="ukf_se" clear_params="true">
    <rosparam command="load" file="$(find tamiya_jetracer)/param/ukf_template.yaml" />

    <!--  Placeholder for output topic remapping
    <remap from="odometry/filtered" to=""/>
    <remap from="accel/filtered" to=""/>
    -->

  </node>
  

</launch>